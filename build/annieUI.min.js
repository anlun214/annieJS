var __extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},annie;!function(e){var t=e.Sprite,a=e.Shape,i=function(i){function s(s,r,o,n){void 0===n&&(n=!0),i.call(this),this.isVertical=!0,this.viewWidth=0,this.viewHeight=0,this._tweenId=0,this.maxDistance=1040,this.distance=0,this.minDis=2,this.maskObj=new a,this.view=new t,this.lastValue=0,this.speed=0,this.addSpeed=0,this.isStop=!0,this.maxSpeed=100,this.fSpeed=20,this.paramXY="y",this.stopTimes=-1,this.isMouseDownState=0,this.autoScroll=!1;var l=this;l._instanceType="annie.ScrollPage",l.addChild(l.maskObj),l.addChild(l.view),l.view.mask=l.maskObj,l.maskObj._isUseToMask=!1,l.maskObj.alpha=0,l.maxDistance=o,l.setViewRect(s,r,n),l.addEventListener(e.MouseEvent.MOUSE_MOVE,l.onMouseEvent.bind(l)),l.addEventListener(e.MouseEvent.MOUSE_UP,l.onMouseEvent.bind(l)),l.addEventListener(e.MouseEvent.MOUSE_OUT,l.onMouseEvent.bind(l)),l.addEventListener(e.Event.ENTER_FRAME,function(){var e=l.view;if(!l.autoScroll)if(l.isStop)l.stopTimes>=0&&++l.stopTimes>=15&&(l.speed=0,(e[l.paramXY]>0||e[l.paramXY]<l.distance-l.maxDistance)&&(l.isStop=!1,l.stopTimes=-1));else if(Math.abs(l.speed)>0)e[l.paramXY]+=l.speed,e[l.paramXY]>0||e[l.paramXY]<l.distance-l.maxDistance?l.speed+=l.addSpeed*l.fSpeed:l.speed+=l.addSpeed,l.speed*l.addSpeed>0&&(l.dispatchEvent("onScrollStop"),l.speed=0);else if(0!=l.addSpeed){if(e[l.paramXY]>0||e[l.paramXY]<l.distance-l.maxDistance){var t=0;l.addSpeed>0&&l.distance<l.maxDistance&&(t=l.distance-l.maxDistance),e[l.paramXY]+=.4*(t-e[l.paramXY]),Math.abs(t-e[l.paramXY])<.1&&(l.isStop=!0,l.addSpeed>0?l.dispatchEvent("onScrollToEnd"):l.dispatchEvent("onScrollToHead"))}}else l.isStop=!0})}return __extends(s,i),s.prototype.setViewRect=function(e,t,a){var i=this;i.maskObj.clear(),i.maskObj.beginFill("#000000"),i.maskObj.drawRect(0,0,e,t),i.viewWidth=e,i.viewHeight=t,i.maskObj.endFill(),i.isVertical=a,a?(i.distance=i.viewHeight,i.paramXY="y"):(i.distance=i.viewWidth,i.paramXY="x"),i.isVertical=a},s.prototype.onMouseEvent=function(t){var a=this,i=a.view;if(t.type==e.MouseEvent.MOUSE_MOVE){if(a.isMouseDownState<1)return a.isStop||(a.isStop=!0),a.autoScroll&&(a.autoScroll=!1,e.Tween.kill(a._tweenId)),a.isVertical?a.lastValue=t.localY:a.lastValue=t.localX,a.speed=0,void(a.isMouseDownState=1);1==a.isMouseDownState&&a.dispatchEvent("onScrollStart"),a.isMouseDownState=2;var s=void 0;if(s=a.isVertical?t.localY:t.localX,a.speed=s-a.lastValue,a.speed>a.minDis?(a.addSpeed=-2,a.speed>a.maxSpeed&&(a.speed=a.maxSpeed)):a.speed<-a.minDis?(a.speed<-a.maxSpeed&&(a.speed=-a.maxSpeed),a.addSpeed=2):a.speed=0,0!=a.speed){var r=1;(i[a.paramXY]>0||i[a.paramXY]<a.distance-a.maxDistance)&&(r=.2),i[a.paramXY]+=(s-a.lastValue)*r}a.lastValue=s,a.stopTimes=0}else a.isStop=!1,a.stopTimes=-1,0==a.speed&&2==a.isMouseDownState&&a.dispatchEvent("onScrollStop"),a.isMouseDownState=0},s.prototype.scrollTo=function(t,a){void 0===a&&(a=0);var i=this,s="x"==i.paramXY?i.viewWidth:i.viewHeight;if(t<0?t=0:t>i.maxDistance-s&&(t=i.maxDistance-s),Math.abs(i.view[i.paramXY]+t)>2){i.autoScroll=!0,i.isStop=!0,i.isMouseDownState=0;var r={};r.onComplete=function(){i.autoScroll=!1},r[i.paramXY]=-t,i._tweenId=e.Tween.to(i.view,a,r),0==i.speed&&i.dispatchEvent("onScrollStart")}},s.prototype.destroy=function(){var e=this;e.maskObj=null,e.view=null,i.prototype.destroy.call(this)},s}(t);e.ScrollPage=i}(annie||(annie={}));var annie;!function(e){var t=e.Sprite,a=function(t){function a(){t.call(this),this.maskType=0;var a=this;a._instanceType="annie.FacePhoto",a.photo=new Image,a.bitmap=new e.Bitmap,a.maskObj=new e.Shape,a.photo.onload=function(e){a.bitmap.bitmapData=a.photo,a.maskObj.clear(),a.maskObj.beginFill("#000000");var t=a.radio/(a.photo.width<a.photo.height?a.photo.width:a.photo.height);a.bitmap.scaleX=a.bitmap.scaleY=t,a.bitmap.x=a.radio-a.photo.width*t>>1,a.bitmap.y=a.radio-a.photo.height*t>>1,0==a.maskType?a.maskObj.drawCircle(a.radio>>1,a.radio>>1,a.radio>>1):a.maskObj.drawRect(0,0,a.radio,a.radio),a.maskObj.endFill(),a.dispatchEvent("onComplete")},a.addChild(a.bitmap),a.bitmap.mask=a.maskObj}return __extends(a,t),a.prototype.init=function(e,t,a){void 0===t&&(t=0),void 0===a&&(a=0);var i=this;i.radio=t,i.photo.src!=e&&(i.photo.src=e),i.maskType!=a&&(i.maskType=a)},a.prototype.destroy=function(){var e=this;e.bitmap=null,e.photo=null,e.maskObj=null,t.prototype.destroy.call(this)},a}(t);e.FacePhoto=a}(annie||(annie={}));var annie;!function(e){var t=e.Sprite,a=function(t){function a(a,i,s,r){void 0===s&&(s=!0),void 0===r&&(r=null),t.call(this),this.listLen=0,this.view=new e.Sprite,this.maskObj=new e.Shape,this.slideSpeed=.2,this._isBreak=!1,this.distance=0,this.touchEndX=0,this.movingX=0,this.movingY=0,this._moveDis=0,this.touchEndY=0,this.currentPageIndex=0,this.reBound=.3,this.isPageFollowToMove=!1,this.follow=.7,this.isMoving=!1,this.viewWidth=0,this.viewHeight=0,this.pageList=[],this.pageClassList=[],this.lastX=0,this.lastY=0,this.isMouseDown=!1,this.canSlideNext=!0,this.canSlidePrev=!0,this.paramXY="y";var o=this;o.isVertical=s,o._ease=r,s?(o.paramXY="y",o.distance=i):(o.paramXY="x",o.distance=a),o.addChild(o.maskObj),o.addChild(o.view),o.view.mask=o.maskObj,o.maskObj._isUseToMask=!1,o.maskObj.alpha=0,o.setMask(a,i);var n=o.onMouseEvent.bind(o);o.addEventListener(e.MouseEvent.MOUSE_DOWN,n),o.addEventListener(e.MouseEvent.MOUSE_MOVE,n),o.addEventListener(e.MouseEvent.MOUSE_UP,n)}return __extends(a,t),a.prototype.setMask=function(e,t){var a=this;a.maskObj.clear(),a.maskObj.beginFill("#000000"),a.maskObj.drawRect(0,0,e,t),a.viewWidth=e,a.viewHeight=t,a.maskObj.endFill()},a.prototype.onMouseEvent=function(t){var a=this;if(!a.isMoving)if(t.type==e.MouseEvent.MOUSE_DOWN)a.touchEndX=t.localX,a.touchEndY=t.localY,a.movingX=a.movingY=0,a.isMouseDown=!0,a._isBreak=!1,a.lastX=t.localX,a.lastY=t.localY,a._moveDis=0;else if(t.type==e.MouseEvent.MOUSE_MOVE){if(!a.isMouseDown)return;var i=t.localX-a.touchEndX,s=t.localY-a.touchEndY,r=s,o=i,n=a.movingY;if(a._moveDis=a.lastY-t.localY,a.movingX=i,a.movingY=s,a.isVertical||(r=i,o=s,n=a.movingX,a._moveDis=a.lastX-t.localX),Math.abs(r)>Math.abs(o)){if(a.isPageFollowToMove||Math.abs(r)-Math.abs(n)<-1&&(a._isBreak=!0),r>0){if(0==a.currentPageIndex)a.view[a.paramXY]-=a._moveDis*a.reBound;else if(a.isPageFollowToMove){a.view[a.paramXY]-=a._moveDis*a.follow;var l=a.currentPageIndex-1;a.pageList[l]||(a.pageList[l]=new a.pageClassList[l]),a.pageList[l].parent!=a.view&&(a.view.addChild(a.pageList[l]),a.pageList[l][a.paramXY]=l*a.distance)}}else if(r<0)if(a.currentPageIndex==a.listLen-1)a.view[a.paramXY]-=a._moveDis*a.reBound;else if(a.isPageFollowToMove){a.view[a.paramXY]-=a._moveDis*a.follow;var l=a.currentPageIndex+1;a.pageList[l]||(a.pageList[l]=new a.pageClassList[l]),a.pageList[l].parent!=a.view&&(a.view.addChild(a.pageList[l]),a.pageList[l][a.paramXY]=l*a.distance)}}else a.movingX=a.movingY=0;a.lastX=t.localX,a.lastY=t.localY}else if(t.type==e.MouseEvent.MOUSE_UP){if(!a.isMouseDown)return;var r=a.movingY,o=a.movingX;if(a.isMouseDown=!1,a.isVertical||(r=a.movingX,o=a.movingY),0==a.currentPageIndex&&a.view[a.paramXY]>0||a.currentPageIndex==a.listLen-1&&a.view[a.paramXY]<-a.currentPageIndex*a.distance){var p={};p[a.paramXY]=-a.currentPageIndex*a.distance,a._ease&&(p.ease=a._ease),e.Tween.to(a.view,a.slideSpeed*a.reBound,p)}else{var d=a.currentPageIndex;if(a.isPageFollowToMove)if(Math.abs(a._moveDis)>5||Math.abs(r*a.follow<<1)>=a.distance)a.slideTo(r<0?d+1:d-1);else{var h=-a.currentPageIndex*a.distance;if(h==a.view[a.paramXY])return;a.view.mouseEnable=!1,a.isMoving=!0;var p={};p[a.paramXY]=h,a._ease&&(p.ease=a._ease),p.onComplete=function(){a.view.mouseEnable=!0,a.isMoving=!1,a.currentPageIndex>0&&a.pageList[a.currentPageIndex-1]&&a.pageList[a.currentPageIndex-1].parent==a.view&&a.view.removeChild(a.pageList[a.currentPageIndex-1]),a.currentPageIndex<a.listLen-1&&a.pageList[a.currentPageIndex+1]&&a.pageList[a.currentPageIndex+1].parent==a.view&&a.view.removeChild(a.pageList[a.currentPageIndex+1])},e.Tween.to(a.view,.5*a.slideSpeed,p)}else Math.abs(r)>100&&!a._isBreak&&a.slideTo(r<0?d+1:d-1)}}},a.prototype.slideTo=function(t,a){void 0===a&&(a=!1);var i=this;if(!i.isMoving&&i.currentPageIndex!=t){var s=i.currentPageIndex,r=i.currentPageIndex<t;if(r){if(!(t<i.listLen&&i.canSlideNext))return;i.currentPageIndex=t}else{if(!(t>=0&&i.canSlidePrev))return;i.currentPageIndex=t}if(i.pageList[i.currentPageIndex]||(i.pageList[i.currentPageIndex]=new i.pageClassList[i.currentPageIndex]),i.pageList[i.currentPageIndex][i.paramXY]=i.currentPageIndex*i.distance,i.pageList[s][i.paramXY]=r?(i.currentPageIndex-1)*i.distance:(i.currentPageIndex+1)*i.distance,i.isPageFollowToMove||(i.view[i.paramXY]=-i.pageList[s][i.paramXY]),i.pageList[i.currentPageIndex]!=i.view&&i.view.addChild(i.pageList[i.currentPageIndex]),a)i.dispatchEvent("onSlideStart",{currentPage:i.currentPageIndex,lastPage:s}),i.view[i.paramXY]=-i.currentPageIndex*i.distance,i.view.removeChild(i.pageList[s]),i.dispatchEvent("onSlideEnd");else{i.view.mouseEnable=!1,i.isMoving=!0;var o={};o[i.paramXY]=-i.currentPageIndex*i.distance,i._ease&&(o.ease=i._ease),o.onComplete=function(){i.view.mouseEnable=!0,i.isMoving=!1,i.view.removeChild(i.pageList[s]),i.dispatchEvent("onSlideEnd")},e.Tween.to(i.view,i.slideSpeed,o),i.dispatchEvent("onSlideStart",{currentPage:i.currentPageIndex,lastPage:s})}}},a.prototype.addPageList=function(e){var t=this;if(t.pageClassList=t.pageClassList.concat(e),0==t.listLen&&t.pageClassList.length>0){var a=new t.pageClassList[0];t.pageList.push(a),t.view.addChild(a)}t.listLen=t.pageClassList.length},a.prototype.destroy=function(){var e=this;e.pageList=null,e.pageClassList=null,t.prototype.destroy.call(this)},a}(t);e.SlidePage=a}(annie||(annie={}));var annie;!function(e){var t=e.Sprite,a=e.Shape,i=e.Event,s=e.MouseEvent,r=e.Point,o=function(o){function n(n,l,p,d){o.call(this),this.totalPage=0,this.currPage=0,this.speed=.4,this.state="stop",this.timerArg0=0,this.timerArg1=0,this.px=0,this.py=0,this.rPage0=new t,this.rPage1=new t,this.pageMC=new t,this.leftPage=null,this.rightPage=null,this.rMask0=new a,this.rMask1=new a,this.shadow0=new a,this.shadow1=new a,this.sMask0=new a,this.sMask1=new a,this.pages=[],this.stageMP=new r,this.canFlip=!0;var h=this;h._instanceType="annie.FlipBook",h.getPageCallback=d,h.bW=n,h.bH=l,h.totalPage=p,h.currPage=h.toPage=0,h.crossGap=Math.sqrt(h.bW*h.bW+h.bH*h.bH),h.p1=new r(0,0),h.p2=new r(0,h.bH),h.p3=new r(h.bW+h.bW,0),h.p4=new r(h.bW+h.bW,h.bH),h.limitP1=new r(h.bW,0),h.limitP2=new r(h.bW,h.bH),h.toPosArr=[h.p3,h.p4,h.p1,h.p2],h.myPosArr=[h.p1,h.p2,h.p3,h.p4],h.addChild(h.pageMC),h.addChild(h.rPage0),h.addChild(h.shadow0),h.addChild(h.rPage1),h.addChild(h.shadow1),h.rPage0.mouseEnable=!1,h.rPage1.mouseEnable=!1,h.shadow0.mouseEnable=!1,h.shadow1.mouseEnable=!1,h.setShadowMask(h.shadow0,h.sMask0,1.5*h.bW,3*h.bH),h.setShadowMask(h.shadow1,h.sMask1,1.5*h.bW,3*h.bH),h.shadow0.visible=!1,h.shadow1.visible=!1,h.rPage1.mask=h.rMask1,h.rPage0.mask=h.rMask0,h.setPage(h.currPage);var c=h.onMouseDown.bind(h),g=h.onMouseUp.bind(h),u=h.onMouseMove.bind(h),v=h.onEnterFrame.bind(h);h.addEventListener(e.Event.ADD_TO_STAGE,function(e){h.stage.addEventListener(s.MOUSE_DOWN,c),h.stage.addEventListener(s.MOUSE_UP,g),h.stage.addEventListener(s.MOUSE_MOVE,u),h.addEventListener(i.ENTER_FRAME,v)}),h.addEventListener(e.Event.REMOVE_TO_STAGE,function(e){h.stage.removeEventListener(s.MOUSE_DOWN,c),h.stage.removeEventListener(s.MOUSE_UP,g),h.stage.removeEventListener(s.MOUSE_MOVE,u),h.removeEventListener(i.ENTER_FRAME,v)})}return __extends(n,o),n.prototype.drawPage=function(e,t){var a,i,s=this;1==e?(t=s.checkLimit(t,s.limitP1,s.bW),t=s.checkLimit(t,s.limitP2,s.crossGap),i=s.getBookArr(t,s.p1,s.p2),a=i[1],s.getLayerArr(t,a,s.p1,s.p2,s.limitP1,s.limitP2),s.getShadow(s.shadow0,s.sMask0,s.p1,t,[s.p1,s.p3,s.p4,s.p2],.5),s.getShadow(s.shadow1,s.sMask1,s.p1,t,s.layer1Arr,.45),s.rPage1.rotation=s.angle(t,a)+90,s.rPage1.x=i[3].x,s.rPage1.y=i[3].y,s.rPage0.x=s.p1.x,s.rPage0.y=s.p1.y):2==e?(t=s.checkLimit(t,s.limitP2,s.bW),t=s.checkLimit(t,s.limitP1,s.crossGap),i=s.getBookArr(t,s.p2,s.p1),a=i[1],s.getLayerArr(t,a,s.p2,s.p1,s.limitP2,s.limitP1),s.getShadow(s.shadow0,s.sMask0,s.p2,t,[s.p1,s.p3,s.p4,s.p2],.5),s.getShadow(s.shadow1,s.sMask1,s.p2,t,s.layer1Arr,.45),s.rPage1.rotation=s.angle(t,a)-90,s.rPage1.x=i[2].x,s.rPage1.y=i[2].y,s.rPage0.x=s.p1.x,s.rPage0.y=s.p1.y):3==e?(t=s.checkLimit(t,s.limitP1,s.bW),t=s.checkLimit(t,s.limitP2,s.crossGap),i=s.getBookArr(t,s.p3,s.p4),a=i[1],s.getLayerArr(t,a,s.p3,s.p4,s.limitP1,s.limitP2),s.getShadow(s.shadow0,s.sMask0,s.p3,t,[s.p1,s.p3,s.p4,s.p2],.5),s.getShadow(s.shadow1,s.sMask1,s.p3,t,s.layer1Arr,.4),s.rPage1.rotation=s.angle(t,a)+90,s.rPage1.x=t.x,s.rPage1.y=t.y,s.rPage0.x=s.limitP1.x,s.rPage0.y=s.limitP1.y):(t=s.checkLimit(t,s.limitP2,s.bW),t=s.checkLimit(t,s.limitP1,s.crossGap),i=s.getBookArr(t,s.p4,s.p3),a=i[1],s.getLayerArr(t,a,s.p4,s.p3,s.limitP2,s.limitP1),s.getShadow(s.shadow0,s.sMask0,s.p4,t,[s.p1,s.p3,s.p4,s.p2],.5),s.getShadow(s.shadow1,s.sMask1,s.p4,t,s.layer1Arr,.4),s.rPage1.rotation=s.angle(t,a)-90,s.rPage1.x=a.x,s.rPage1.y=a.y,s.rPage0.x=s.limitP1.x,s.rPage0.y=s.limitP1.y),s.getShape(s.rMask1,s.layer1Arr),s.getShape(s.rMask0,s.layer0Arr)},n.prototype.checkLimit=function(e,t,a){var i=this,s=Math.abs(i.pos(t,e)),o=i.angle(t,e);if(s>a){var n=a*Math.sin(o/180*Math.PI),l=a*Math.cos(o/180*Math.PI);e=new r(t.x-l,t.y-n)}return e},n.prototype.getPage=function(e){var t=this;return t.pages[e-1]||(t.pages[e-1]=t.getPageCallback(e)),t.pages[e-1]},n.prototype.getBookArr=function(e,t,a){var i=this,s=[],o=Math.abs(.5*i.pos(t,e)),n=i.angle(t,e),l=o/Math.cos(n/180*Math.PI),p=new r(t.x-l,t.y),d=i.angle(e,p)-i.angle(e,a),h=i.pos(e,a),c=h*Math.sin(d/180*Math.PI),g=h*Math.cos(d/180*Math.PI),u=new r(t.x+g,t.y+c),v=i.angle(p,e),m=i.bW*Math.sin(v/180*Math.PI),w=i.bW*Math.cos(v/180*Math.PI),P=new r(u.x+w,u.y+m),M=new r(e.x+w,e.y+m);return s.push(e),s.push(u),s.push(P),s.push(M),s},n.prototype.getLayerArr=function(e,t,a,i,s,o){var n=this,l=[],p=[],d=Math.abs(.5*n.pos(a,e)),h=n.angle(a,e),c=d/Math.sin(h/180*Math.PI),g=d/Math.cos(h/180*Math.PI),u=new r(a.x-g,a.y),v=new r(a.x,a.y-c),m=t;if(Math.abs(n.pos(e,i))>n.bH){l.push(m);var w=Math.abs(.5*n.pos(m,i)),P=w/Math.cos(h/180*Math.PI);v=new r(i.x-P,i.y)}else p.push(i);l.push(v),l.push(u),l.push(e),n.layer1Arr=l,p.push(o),p.push(s),p.push(u),p.push(v),n.layer0Arr=p},n.prototype.getShape=function(e,t){var a=t.length;e.clear(),e.beginFill("#000"),e.moveTo(t[0].x,t[0].y);for(var i=1;i<a;i++)e.lineTo(t[i].x,t[i].y);e.endFill()},n.prototype.setShadowMask=function(e,t,a,i){e.beginLinearGradientFill([.5*-a,4,.5*a,4],[{o:0,c:"#000000",a:0},{o:1,c:"#000000",a:.6}]),e.drawRect(.5*-a,.5*-i,.5*a,i),e.endFill(),e.beginLinearGradientFill([.5*-a,4,.5*a,4],[{o:1,c:"#000000",a:0},{o:0,c:"#000000",a:.6}]),e.drawRect(0,.5*-i,.5*a,i),e.endFill(),e.mask=t},n.prototype.getShadow=function(e,t,a,i,s,r){var o,n,l=this;e.visible=!0,e.x=i.x+(a.x-i.x)*r,e.y=i.y+(a.y-i.y)*r,e.rotation=l.angle(a,i),o=.5*Math.abs(a.x-i.x)/l.bW,n=1-o*o,e.scaleX=o+.1,e.alpha=n+.1,l.getShape(t,s)},n.prototype.setPage=function(e){var t=this;e>0&&e<=t.totalPage&&(t.leftPage=t.getPage(e),t.leftPage.x=t.leftPage.y=0,t.pageMC.addChild(t.leftPage)),e+1>0&&e+1<t.totalPage&&(t.rightPage=t.getPage(e+1),t.rightPage.x=t.bW,t.rightPage.y=0,t.pageMC.addChild(t.rightPage))},n.prototype.onMouseDown=function(e){var t=this;if(t.canFlip&&"stop"==t.state){t.stageMP.x=e.clientX,t.stageMP.y=e.clientY;var a=t.globalToLocal(t.stageMP);t.stageMP=a,t.timerArg0=t.checkArea(a),t.timerArg0=t.timerArg0<0?-t.timerArg0:t.timerArg0,t.timerArg0>0&&(t.timerArg0<3&&t.currPage>0||t.timerArg0>2&&t.currPage<=t.totalPage-2)&&(t.state="start",t.flushPage(),e.updateAfterEvent(),t.dispatchEvent("onFlipStart"))}},n.prototype.onMouseUp=function(e){var t=this;if("start"==t.state){t.stageMP.x=e.clientX,t.stageMP.y=e.clientY;var a=t.globalToLocal(t.stageMP);t.timerArg1=t.checkArea(a),t.state="auto",t.stageMP=a}},n.prototype.onMouseMove=function(e){var t=this;if("start"==t.state){t.stageMP.x=e.clientX,t.stageMP.y=e.clientY;var a=t.globalToLocal(t.stageMP);t.stageMP=a}},n.prototype.checkArea=function(e){var t,a=this,i=a.bW+a.bW,s=a.bH;return e.x>0&&e.x<=.5*i?(t=e.y>0&&e.y<=.5*s?1:e.y>.5*s&&e.y<s?2:0,e.x<=50&&(t=e.y>0&&e.y<=50?-1:e.y>s-50&&e.y<s?-2:t),t):e.x>.5*i&&e.x<i?(t=e.y>0&&e.y<=.5*s?3:e.y>.5*s&&e.y<s?4:0,e.x>=i-50&&(t=e.y>0&&e.y<=50?-3:e.y>s-50&&e.y<s?-4:t),t):0},n.prototype.flipTo=function(e){var t,a=this;e=e%2==1?e-1:e,t=e-a.currPage,"stop"==a.state&&e>=0&&e<=a.totalPage&&0!=t&&(a.timerArg0=t<0?1:3,a.timerArg1=-1,a.toPage=e>a.totalPage?a.totalPage:e,a.state="auto",a.flushPage())},n.prototype.nextPage=function(){this.flipTo(this.currPage+2)},n.prototype.prevPage=function(){this.flipTo(this.currPage-1)},n.prototype.startPage=function(){this.flipTo(0)},n.prototype.endPage=function(){this.flipTo(this.totalPage)},n.prototype.flushPage=function(){var e,t,a=this,i=a.myPosArr[a.timerArg0-1],s=null;1==a.timerArg0||2==a.timerArg0?(a.toPage=a.toPage==a.currPage?a.currPage-2:a.toPage,e=a.currPage,t=a.toPage+1,this.pageMC.removeChild(a.leftPage),a.toPage>0&&(s=a.getPage(a.currPage-2),s.x=0,a.leftPage=s,a.pageMC.addChild(s))):3!=a.timerArg0&&4!=a.timerArg0||(a.toPage=a.toPage==a.currPage?a.currPage+2:a.toPage,e=a.currPage+1,t=a.toPage,a.pageMC.removeChild(a.rightPage),a.toPage+1<a.totalPage&&(s=a.getPage(a.currPage+3),s.x=a.bW,a.rightPage=s,a.pageMC.addChild(s))),a.px=i.x,a.py=i.y,e>0&&e<=a.totalPage&&(s=a.getPage(e),s.x=0,s.y=0,a.rPage0.addChild(s)),t>0&&t<=a.totalPage&&(s=a.getPage(t),s.x=0,s.y=0,a.rPage1.addChild(s))},n.prototype.onEnterFrame=function(e){var t,a,i,s,o,n,l=this,p=l.toPosArr[l.timerArg0-1],d=l.myPosArr[l.timerArg0-1];if("start"==l.state){n=l.speed;var h=l.stageMP;l.px+=(h.x-l.px)*n>>0,l.py+=(h.y-l.py)*n>>0;var c=new r(l.px,l.py);l.drawPage(l.timerArg0,c)}else"auto"==l.state&&(Math.abs(p.x-l.px)>1.5*l.bW&&l.timerArg1>0?(t=d.x,a=d.y,i=0):(t=p.x,a=p.y,i=1),s=t-l.px>>0,o=a-l.py>>0,l.timerArg1<0?(n=.7*l.speed,l.py=l.arc(l.bW,s,p.y)):(n=l.speed,l.py=o*n+l.py),l.px=s*n+l.px,l.drawPage(l.timerArg0,new r(l.px,l.py)),0==s&&0==o&&(l.rPage0.removeAllChildren(),l.rPage1.removeAllChildren(),l.shadow0.visible=!1,l.shadow1.visible=!1,l.toPage=0==i?l.currPage:l.toPage,l.currPage=l.toPage,l.pageMC.removeAllChildren(),l.setPage(l.currPage),l.state="stop",l.dispatchEvent("onFlipStop")))},n.prototype.arc=function(e,t,a){var i=2*e,s=e*e+i*i,r=Math.abs(t)-e;return a-(Math.sqrt(s-r*r)-i)},n.prototype.angle=function(e,t){var a=e.x-t.x,i=e.y-t.y,s=180*Math.atan2(i,a)/Math.PI;return s<0?s+360:s},n.prototype.pos=function(e,t){var a=e.x-t.x,i=e.y-t.y,s=Math.sqrt(a*a+i*i);return e.x>t.x?s:-s},n.prototype.destroy=function(){var e=this;e.layer0Arr=null,e.layer1Arr=null,e.toPosArr=null,e.myPosArr=null,e.rPage0=null,e.rMask0=null,e.rMask1=null,e.sMask0=null,e.sMask1=null,e.leftPage=null,e.rightPage=null,e.pageMC=null,e.rightPage=null,e.shadow0=null,e.shadow1=null,e.p1=null,e.p2=null,e.p3=null,e.p4=null,e.limitP1=null,e.limitP2=null,e.pages=null,e.stageMP=null,e.getPageCallback=null,o.prototype.destroy.call(this)},n}(t);e.FlipBook=o}(annie||(annie={}));var annie;!function(e){var t=function(t){function a(a,i,s,r,o,n,l){void 0===n&&(n=!0),void 0===l&&(l=1),t.call(this,r,o,0,n),this._items=null,this.data=[],this.downL=null,this._lastFirstId=-1;var p=this;p._isInit=!1,p._instanceType="annie.ScrollList",p._itemW=i,p._itemH=s,p._items=[],p._itemClass=a,p._itemCount=0,p._cols=l,p._updateViewRect(),p.addEventListener(e.Event.ENTER_FRAME,p.flushData.bind(p))}return __extends(a,t),Object.defineProperty(a.prototype,"loadingView",{get:function(){return this.downL},enumerable:!0,configurable:!0}),a.prototype.updateData=function(e,t){void 0===t&&(t=!1);var a=this;if(!a._isInit||t?(a.data=e,a._isInit=!0):a.data=a.data.concat(e),a._lastFirstId=-1,a.maxDistance=Math.ceil(a.data.length/a._cols)*a._itemRow,a.downL){a.downL[a.paramXY]=Math.max(a.distance,a.maxDistance);var i=a.downL.getWH();a.maxDistance+="x"==a.paramXY?i.width:i.height}},a.prototype.flushData=function(){var e=this;if(e._isInit&&e.view._UI.UM){var t=(Math.abs(Math.floor(e.view[e.paramXY]/e._itemRow))-1)*e._cols;if((t=t<0?0:t)!=e._lastFirstId&&(e._lastFirstId=t,t!=e._items[0].id))for(var a=0;a<e._cols;a++)e.speed>0?e._items.unshift(e._items.pop()):e._items.push(e._items.shift());for(var i=0;i<e._itemCount;i++){var s=e._items[i];s._a2x_sl_id!=t&&(s.initData(e.data[t]?t:-1,e.data[t]),s.visible=!!e.data[t],s[e.paramXY]=Math.floor(t/e._cols)*e._itemRow,s[e._disParam]=t%e._cols*e._itemCol,s._a2x_sl_id=t),t++}}},a.prototype.setViewRect=function(e,a,i){t.prototype.setViewRect.call(this,e,a,i);var s=this;s._itemRow&&s._itemCol&&s._updateViewRect()},a.prototype._updateViewRect=function(){var e=this;e.isVertical?(e._disParam="x",e._itemRow=e._itemH,e._itemCol=e._itemW):(e._disParam="y",e._itemRow=e._itemW,e._itemCol=e._itemH);var t=(Math.ceil(e.distance/e._itemRow)+1)*e._cols;if(t!=e._itemCount){if(t>e._itemCount)for(var a=e._itemCount;a<t;a++){var i=new e._itemClass;i.id=-1,i.data=null,e._items.push(i),e.view.addChild(i)}else for(var a=0;a<e._itemCount-t;a++)e.view.removeChild(e._items.pop());e._itemCount=t,e._lastFirstId=-1}},a.prototype.setLoading=function(e){var t=this;if(t.downL){t.view.removeChild(t.downL);var a=t.downL.getWH();t.maxDistance-="x"==t.paramXY?a.width:a.height,t.downL=null}if(e){t.downL=e,t.view.addChild(e),t.downL[t.paramXY]=Math.max(t.distance,t.maxDistance);var a=t.downL.getWH();t.maxDistance+="x"==t.paramXY?a.width:a.height}else t.isStop=!1},a.prototype.destroy=function(){var e=this;e._items=null,e._itemClass=null,e.data=null,e.downL=null,t.prototype.destroy.call(this)},a}(e.ScrollPage);e.ScrollList=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function a(a,i,s){void 0===s&&(s=""),t.call(this),this.context=null,this._isMouseDown=!1,this._drawRadius=50,this.drawColor="#ffffff",this.bgColor="",this.drawWidth=0,this.drawHeight=0,this.totalStepList=[],this.currentStepId=0;var r=this,o=document.createElement("canvas");o.width=a,o.height=i,r.context=o.getContext("2d"),r.context.lineCap="round",r.context.lineJoin="round",r.bitmapData=o,r.drawHeight=i,r.drawWidth=a,r.reset(s);var n=r.onMouseDown.bind(r),l=r.onMouseMove.bind(r),p=r.onMouseUp.bind(r);r.addEventListener(e.MouseEvent.MOUSE_DOWN,n),r.addEventListener(e.MouseEvent.MOUSE_MOVE,l),r.addEventListener(e.MouseEvent.MOUSE_UP,p)}return __extends(a,t),Object.defineProperty(a.prototype,"drawRadius",{get:function(){return this._drawRadius},set:function(e){this._drawRadius=e},enumerable:!0,configurable:!0}),a.prototype.onMouseDown=function(e){var t=this;t._isMouseDown=!0;var a=t.context;a.beginPath(),a.strokeStyle=t.drawColor,a.lineWidth=t._drawRadius;var i=e.localX>>0,s=e.localY>>0;a.moveTo(i,s),t.addStepObj={},t.addStepObj.c=t.drawColor,t.addStepObj.r=t._drawRadius,t.addStepObj.sx=i,t.addStepObj.sy=s,t.addStepObj.ps=[]},a.prototype.onMouseUp=function(e){var t=this;t._isMouseDown&&(t._isMouseDown=!1,t.addStepObj.ps&&t.addStepObj.ps.length>0&&(t.currentStepId++,t.totalStepList.push(t.addStepObj)))},a.prototype.onMouseMove=function(e){var t=this;if(t._isMouseDown){var a=t.context,i=e.localX>>0,s=e.localY>>0;a.lineTo(i,s),a.stroke(),t.addStepObj.ps.push(i,s)}},a.prototype.reset=function(e){void 0===e&&(e="");var t=this;""!=e&&(t.bgColor=e),""!=t.bgColor?(t.context.fillStyle=t.bgColor,t.context.fillRect(0,0,t.bitmapData.width,t.bitmapData.height)):t.context.clearRect(0,0,t.bitmapData.width,t.bitmapData.height),t.currentStepId=0,t.totalStepList=[]},a.prototype.cancel=function(e){void 0===e&&(e=0);var t=this;if(0==e)t.reset();else{if(!(t.currentStepId-e>=0))return!1;t.currentStepId-=e,t.totalStepList.splice(t.currentStepId,e),""!=t.bgColor?(t.context.fillStyle=t.bgColor,t.context.fillRect(0,0,t.bitmapData.width,t.bitmapData.height)):t.context.clearRect(0,0,t.bitmapData.width,t.bitmapData.height);for(var a=t.totalStepList.length,i=0;i<a;i++){var s=t.context;s.beginPath(),s.strokeStyle=t.totalStepList[i].c,s.lineWidth=t.totalStepList[i].r,s.moveTo(t.totalStepList[i].sx,t.totalStepList[i].sy);for(var r=t.totalStepList[i].ps,o=r.length,n=0;n<o;n+=2)s.lineTo(r[n],r[n+1]),s.stroke()}}return!0},a.prototype.destroy=function(){var e=this;e.context=null,e.totalStepList=null,e.drawColor=null,e.bgColor=null,e.addStepObj=null,t.prototype.destroy.call(this)},a}(e.Bitmap);e.DrawingBoard=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function a(a,i,s,r,o){void 0===o&&(o=50),t.call(this,a,i,s),this._drawList=[],this._totalDraw=1,this._currentDraw=0;var n=this;n.drawColor=r,n.drawRadius=o,n.addEventListener(e.MouseEvent.MOUSE_MOVE,function(e){if(n._isMouseDown){var t=Math.floor(e.localX/n._drawRadius),a=Math.floor(e.localY/n._drawRadius);if(n._drawList[t]&&n._drawList[t][a]){n._drawList[t][a]=!1,n._currentDraw++;var i=Math.floor(n._currentDraw/n._totalDraw*100);n.dispatchEvent("onDrawTime",{per:i})}}})}return __extends(a,t),a.prototype.reset=function(e){void 0===e&&(e=""),t.prototype.reset.call(this,e);var a=this;if(a._drawList){""!=e&&(a.drawColor=e),a._currentDraw=0;var i=Math.floor(a.drawWidth/a._drawRadius),s=Math.floor(a.drawHeight/a._drawRadius);a._totalDraw=i*s;for(var r=0;r<i;r++){a._drawList[r]=[];for(var o=0;o<s;o++)a._drawList[r][o]=!0}}},a.prototype.cancel=function(e){return void 0===e&&(e=0),trace("no support"),!1},Object.defineProperty(a.prototype,"drawRadius",{set:function(e){var t=this;t._drawRadius=e;var a=Math.floor(t.drawWidth/e),i=Math.floor(t.drawHeight/e);t._totalDraw=a*i;for(var s=0;s<a;s++){t._drawList[s]=[];for(var r=0;r<i;r++)t._drawList[s][r]=!0}},enumerable:!0,configurable:!0}),a.prototype.destroy=function(){this._drawList=null,t.prototype.destroy.call(this)},a}(e.DrawingBoard);e.ScratchCard=t}(annie||(annie={}));